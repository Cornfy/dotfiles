#!/bin/bash

# --- é…ç½®åŒº ---
REMOTE="shell@oneplus12"
REMOTE_PATH="/storage/emulated/0"
MOUNT_POINT="$HOME/Mobile_Phone"
SSH_PORT="22"

# ç¡®ä¿æŒ‚è½½ç‚¹å­˜åœ¨
mkdir -p "$MOUNT_POINT"

# æ£€æŸ¥æ˜¯å¦å·²æŒ‚è½½ï¼Œé¿å…é‡å¤æŒ‚è½½
if mountpoint -q "$MOUNT_POINT"; then
    echo "â„¹ï¸  æ‰‹æœºå·²æŒ‚è½½åœ¨ $MOUNT_POINT"
    exit 0
fi

echo "ğŸ“‚ æ­£åœ¨æŒ‚è½½æ‰‹æœºå­˜å‚¨ ($REMOTE)..."

# æ‰§è¡ŒæŒ‚è½½
# -o idmap=user: æŠŠè¿œç¨‹ root æ˜ å°„ä¸ºå½“å‰æœ¬åœ°ç”¨æˆ·
# -o allow_other: å…è®¸æœ¬åœ°é root ç”¨æˆ·è®¿é—®è¯¥æŒ‚è½½ç‚¹
sshfs $REMOTE:$REMOTE_PATH $MOUNT_POINT \
    -p $SSH_PORT \
    -o kernel_cache \
    -o auto_cache \
    -o reconnect \
    -o compression=no \
    -o ServerAliveInterval=15 \
    -o ServerAliveCountMax=3

if [ $? -eq 0 ]; then
    echo "âœ… æŒ‚è½½æˆåŠŸï¼"
    echo "ğŸ”— è·¯å¾„: $MOUNT_POINT"
else
    echo "âŒ æŒ‚è½½å¤±è´¥ã€‚"
fi
